# 🎉 登录/注册页面使用指南

## 📋 概述

已成功创建登录和注册页面，完成了用户认证的前端界面！

## ✨ 已实现的功能

### 1. **用户认证状态管理** (`app/composables/useAuth.ts`)
- ✅ 用户登录
- ✅ 用户注册
- ✅ 用户登出
- ✅ 获取/更新用户信息
- ✅ Token 自动存储到 localStorage
- ✅ 页面刷新后保持登录状态

### 2. **登录页面** (`/login`)
- ✅ 美观的表单设计
- ✅ 邮箱和密码验证
- ✅ 实时错误提示
- ✅ 测试账号快速登录功能
- ✅ "记住我"选项
- ✅ 跳转到注册页面
- ✅ 加载状态显示

### 3. **注册页面** (`/register`)
- ✅ 完整的注册表单
- ✅ 密码强度指示器（弱/中等/强）
- ✅ 确认密码验证
- ✅ 邮箱格式验证
- ✅ 服务条款同意选项
- ✅ 用户名可选输入
- ✅ 友好的错误提示

### 4. **首页更新** (`/`)
- ✅ 顶部导航栏
- ✅ 用户登录状态显示
- ✅ 用户头像菜单
- ✅ 项目特性展示
- ✅ 响应式设计

### 5. **链接列表页面** (`/links`)
- ✅ 基础页面框架
- ✅ 导航栏和用户菜单
- ✅ 占位内容（完整功能开发中）

## 🚀 使用方法

### 1. 启动开发服务器

```bash
# 确保已安装依赖
pnpm install

# 启动开发服务器
pnpm dev
```

访问 `http://localhost:3000`

### 2. 准备测试数据

```bash
# 确保数据库已配置
# 推送数据库模型
pnpm db:push

# 填充测试数据
pnpm db:seed
```

### 3. 测试登录功能

**方法一：使用测试账号**
1. 访问 `http://localhost:3000/login`
2. 点击"使用测试账号"按钮
3. 点击"登录"按钮

**方法二：手动输入**
- 邮箱：`alice@example.com`
- 密码：`password123`

### 4. 测试注册功能

1. 访问 `http://localhost:3000/register`
2. 填写表单：
   - 邮箱：输入有效的邮箱地址
   - 用户名：可选
   - 密码：至少 6 个字符（观察密码强度指示器）
   - 确认密码：与密码一致
3. 勾选"同意服务条款"
4. 点击"注册"按钮

## 🎨 页面特性

### 登录页面特性
- 🎯 表单验证（邮箱格式、密码长度）
- 🚀 测试账号快速登录
- 💡 友好的错误提示
- 🔄 加载状态指示
- 📱 响应式设计

### 注册页面特性
- 🔐 密码强度实时检测
- ✅ 确认密码匹配验证
- 📧 邮箱格式验证
- 📝 服务条款确认
- 🎨 美观的 UI 设计

### 首页特性
- 🎨 现代化设计
- 👤 用户状态展示
- 📊 特性卡片展示
- 🎯 快速导航

## 🔒 安全特性

1. **密码加密**：所有密码使用 bcrypt 加密存储
2. **JWT 认证**：使用 JSON Web Token 进行身份验证
3. **Token 过期**：访问令牌 1 小时过期，刷新令牌 7 天过期
4. **表单验证**：前端和后端双重验证

## 📱 页面路由

| 路由 | 说明 | 是否需要登录 |
|------|------|-------------|
| `/` | 首页 | ❌ |
| `/login` | 登录页面 | ❌ |
| `/register` | 注册页面 | ❌ |
| `/links` | 链接列表 | ✅ |

## 🎯 用户流程

### 新用户流程
1. 访问首页 → 点击"注册"
2. 填写注册表单
3. 注册成功后自动登录
4. 跳转到首页（已登录状态）

### 老用户流程
1. 访问首页 → 点击"登录"
2. 输入邮箱和密码
3. 登录成功
4. 跳转到首页（已登录状态）

### 已登录用户
- 首页显示"我的链接"按钮
- 右上角显示用户头像菜单
- 可以查看个人资料
- 可以退出登录

## 🔧 技术实现

### 状态管理
使用 Nuxt 的 `useState` 进行全局状态管理：
- 用户信息存储在 `auth:user`
- Token 存储在 `auth:token` 和 `auth:refreshToken`
- 同时保存到 localStorage 实现持久化

### API 调用
使用 Nuxt 的 `$fetch` 进行 API 调用：
```typescript
const response = await $fetch('/api/auth/login', {
  method: 'POST',
  body: { email, password }
})
```

### 表单验证
前端实时验证：
- 邮箱格式验证
- 密码长度验证
- 密码匹配验证
- 实时错误提示

### UI 组件
使用 Nuxt UI 组件库：
- `UCard` - 卡片容器
- `UInput` - 输入框
- `UButton` - 按钮
- `UAlert` - 提示框
- `UToast` - 通知消息
- `UAvatar` - 用户头像
- `UDropdown` - 下拉菜单

## 🎨 样式特点

- 🌙 支持深色模式
- 📱 完全响应式设计
- 🎯 现代化 UI 风格
- 💫 流畅的动画过渡
- 🎨 统一的视觉风格

## 📝 注意事项

1. **测试账号**：开发环境可以使用测试账号快速登录
2. **Token 过期**：访问令牌 1 小时后会过期，需要重新登录
3. **数据持久化**：刷新页面后会自动恢复登录状态
4. **错误处理**：所有 API 错误都会通过 Toast 提示用户

## 🚧 待开发功能

- ❌ 忘记密码功能
- ❌ 邮箱验证功能
- ❌ 第三方登录（Google、GitHub 等）
- ❌ 刷新 Token API
- ❌ 个人资料页面
- ❌ 完整的链接管理功能

## 🆘 常见问题

### 1. 登录后刷新页面需要重新登录？
检查浏览器是否禁用了 localStorage，或者 Token 是否已过期。

### 2. 表单验证不通过？
- 确保邮箱格式正确
- 密码至少 6 个字符
- 确认密码与密码一致
- 勾选了服务条款

### 3. API 调用失败？
- 确保开发服务器正常运行
- 检查数据库连接是否正常
- 查看浏览器控制台的错误信息

### 4. 测试账号无法登录？
确保已运行 `pnpm db:seed` 填充测试数据。

## 📚 相关文档

- [认证功能文档](./AUTH_GUIDE.md) - 后端 API 详细说明
- [Prisma 使用指南](./PRISMA_GUIDE.md) - 数据库操作
- [链接管理功能](./LINK_GUIDE.md) - 链接 API 文档

## 🎉 总结

现在您已经拥有了：
- ✅ 美观的登录页面
- ✅ 功能完整的注册页面
- ✅ 用户认证状态管理
- ✅ 响应式导航栏
- ✅ 用户信息展示

可以开始开发更多功能了！🚀

