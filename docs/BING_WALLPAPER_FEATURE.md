# 必应每日壁纸功能

## 📖 功能概述

LinkLantern 现在支持**必应每日壁纸**功能！您可以选择使用必应搜索引擎每天更新的精美壁纸作为首页背景，无需手动上传，每天都有新的视觉体验。

## ✨ 功能特点

- 🌅 **每日更新**：必应每天全球同步的精美壁纸
- 🎨 **高质量图片**：专业摄影师拍摄的自然风光
- 🔄 **自动切换**：每次访问首页都能看到最新壁纸
- 📱 **响应式设计**：自动适配不同屏幕尺寸
- 🌓 **深色模式适配**：在明暗主题下都有良好显示效果
- ⚡ **无存储压力**：不占用数据库空间
- 🎯 **一键开关**：轻松切换自定义背景和必应壁纸

## 🚀 使用指南

### 启用必应壁纸

1. **进入设置页面**
   - 登录您的账户
   - 进入「管理后台」→「关于」
   - 找到「首页背景设置」区域

2. **启用开关**
   - 找到「启用必应每日壁纸」选项
   - 点击右侧的切换开关
   - 开关变为蓝色表示已启用

3. **查看效果**
   - 返回首页查看必应壁纸
   - 每次刷新或访问都会自动获取最新壁纸

### 关闭必应壁纸

1. 进入「管理后台」→「关于」
2. 找到「启用必应每日壁纸」开关
3. 再次点击关闭
4. 可以选择上传自定义背景或使用默认背景

## 🎯 与自定义背景的关系

### 互斥关系

- ✅ **启用必应壁纸时**：
  - 自动清除自定义背景
  - 自定义背景上传功能被禁用
  - 首页显示必应每日壁纸

- ✅ **关闭必应壁纸时**：
  - 可以上传自定义背景
  - 或使用默认渐变背景

### 优先级

```
优先级从高到低：
1. 必应壁纸（如果启用）
2. 自定义背景（如果有上传）
3. 默认渐变背景
```

## 🛠️ 技术实现

### 数据库模型

在 User 表中新增 `useBingWallpaper` 字段：

```prisma
model User {
  // ... 其他字段
  useBingWallpaper Boolean  @default(false)  // 是否启用必应壁纸
  // ... 其他字段
}
```

### API 接口

#### 切换必应壁纸

```http
PUT /api/auth/bing-wallpaper
Authorization: Bearer {token}
Content-Type: application/json

{
  "enabled": true
}
```

**响应：**
```json
{
  "success": true,
  "message": "已启用必应壁纸",
  "data": {
    "user": {
      "id": 1,
      "email": "user@example.com",
      "useBingWallpaper": true,
      "homeBackground": null
    }
  }
}
```

### 必应壁纸 API

**接口地址**: `https://uapis.cn/api/v1/image/bing-daily`  
**响应类型**: 302 重定向到图片

**特点**：
- 每天自动更新
- 全球同步
- 高质量图片
- 内置备用方案（官方API失败时）

### 前端实现

#### Composable 方法

```typescript
// 切换必应壁纸
const toggleBingWallpaper = async (enabled: boolean) => {
  const response = await $fetch('/api/auth/bing-wallpaper', {
    method: 'PUT',
    headers: { Authorization: `Bearer ${token}` },
    body: { enabled }
  })
  // 更新用户状态...
}
```

#### 首页显示

```vue
<template>
  <!-- 必应壁纸背景层 -->
  <div 
    v-if="useBingWallpaper" 
    class="fixed inset-0 z-0"
    :style="{ 
      backgroundImage: `url(https://uapis.cn/api/v1/image/bing-daily)`,
      backgroundSize: 'cover',
      backgroundPosition: 'center'
    }"
  >
    <!-- 半透明遮罩 -->
    <div class="absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm"></div>
  </div>
</template>

<script setup>
const { user } = useAuth()
const useBingWallpaper = computed(() => user.value?.useBingWallpaper || false)
</script>
```

## 📊 优势对比

| 特性 | 必应壁纸 | 自定义背景 | 默认背景 |
|------|---------|-----------|---------|
| **存储空间** | 无占用 | 4MB限制 | 无占用 |
| **更新频率** | 每天自动 | 手动更新 | 固定 |
| **图片质量** | 专业级 | 取决于用户 | 普通 |
| **个性化** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐ |
| **便捷性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **数据库压力** | 无 | 有（5.3MB） | 无 |

## 💡 使用场景

### 适合使用必应壁纸

- ✅ 喜欢每天看到新鲜内容
- ✅ 不想占用数据库空间
- ✅ 希望使用专业级摄影作品
- ✅ 追求简单便捷的体验

### 适合使用自定义背景

- ✅ 有特定的品牌或主题需求
- ✅ 想使用个人照片或设计
- ✅ 需要固定的背景图片
- ✅ 追求完全的个性化

## 🎨 必应壁纸特色

### 高质量内容

必应每日壁纸由专业摄影师拍摄，涵盖：

- 🏔️ 自然风光（山川、湖泊、森林）
- 🌅 日出日落美景
- 🏛️ 世界著名建筑
- 🐾 野生动物
- 🌸 花卉植物
- 🎆 节日庆典
- 🌍 各国文化景观

### 教育价值

每张壁纸都配有故事和背景介绍，让您在欣赏美图的同时了解世界。

## ⚠️ 注意事项

### 网络依赖

- 必应壁纸需要访问外部 API
- 如果网络不稳定，可能加载较慢
- 备用方案：API 失败时会显示预存图片

### 隐私考虑

- 访问必应壁纸 API 时，您的 IP 地址会被记录
- 建议阅读 UapiPro 的隐私政策

### 性能影响

- 首次加载可能需要几秒钟
- 图片会被浏览器缓存
- 建议在良好网络环境下使用

## 🔧 故障排除

### 壁纸无法显示

**问题**：启用后首页没有显示必应壁纸

**解决方案**：
1. 刷新页面（Ctrl+R 或 F5）
2. 清除浏览器缓存
3. 检查网络连接
4. 查看浏览器控制台是否有错误

### 加载速度慢

**问题**：必应壁纸加载时间过长

**解决方案**：
1. 检查网络连接速度
2. 尝试在不同时间访问
3. 考虑使用自定义背景

### 图片显示异常

**问题**：壁纸显示不完整或变形

**解决方案**：
1. 确保浏览器版本是最新的
2. 尝试在不同浏览器中打开
3. 检查显示器分辨率设置

## 📚 相关文档

- [首页背景功能指南](./HOME_BACKGROUND_FEATURE.md)
- [背景图片资源推荐](./IMAGE_RESOURCES.md)
- [数据库限制说明](./DATABASE_LIMITS.md)

## 🆚 功能对比

### 必应壁纸 vs 随机图片 API

| 特性 | 必应壁纸 | UapiPro 随机图片 |
|------|---------|-----------------|
| **更新频率** | 每天 | 每次随机 |
| **图片质量** | 极高 | 高 |
| **图片类型** | 自然风光为主 | 多种类别 |
| **故事背景** | 有 | 无 |
| **选择性** | 无法选择 | 可选类别 |
| **稳定性** | 极高 | 高 |

**建议**：
- 如果喜欢每天看到相同的精美壁纸：选择**必应壁纸**
- 如果希望每次访问都有惊喜：可以自行集成 [UapiPro 随机图片](./IMAGE_RESOURCES.md)

## 💬 用户反馈

### 常见问题

**Q: 可以选择历史的必应壁纸吗？**  
A: 目前只支持当天的最新壁纸。未来可能会添加历史壁纸功能。

**Q: 为什么启用必应壁纸后自定义背景被删除了？**  
A: 为了避免混淆，两种背景模式是互斥的。启用必应壁纸会自动清除自定义背景。

**Q: 可以同时使用必应壁纸和自定义背景吗？**  
A: 不可以，两者是互斥的。您需要在两者之间选择其一。

**Q: 必应壁纸占用数据库空间吗？**  
A: 不占用。必应壁纸通过 API 实时获取，不存储在数据库中。

## 🎯 未来计划

- [ ] 支持选择历史必应壁纸
- [ ] 添加壁纸自动切换（每小时/每次访问）
- [ ] 支持其他壁纸源（Unsplash、Pexels 等）
- [ ] 添加壁纸故事显示
- [ ] 支持壁纸收藏功能

---

**更新时间**: 2026-01-20  
**必应壁纸 API**: https://uapis.cn/api/v1/image/bing-daily  
**API 提供方**: UapiPro (https://uapis.cn/)

