# æ¯æ—¥ä¸€è¨€åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

åœ¨é¦–é¡µæœç´¢åŒºåŸŸä¸‹æ–¹æ–°å¢"æ¯æ—¥ä¸€è¨€"åŠŸèƒ½ï¼Œæ¯æ¬¡åŠ è½½é¡µé¢éƒ½ä¼šæ˜¾ç¤ºä¸€å¥éšæœºçš„è¯—è¯ã€åè¨€æˆ–åŠ¨æ¼«å°è¯ï¼Œä¸ºç”¨æˆ·å¸¦æ¥å°å°çš„æƒŠå–œå’Œçµæ„Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
1. **éšæœºè¯­å½•** - æ¯æ¬¡åˆ·æ–°æ˜¾ç¤ºä¸åŒçš„å†…å®¹
2. **ä¸€é”®åˆ·æ–°** - ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–æ–°çš„è¯­å½•
3. **ä¼˜é›…è®¾è®¡** - æ¸å˜èƒŒæ™¯ã€å¼•å·å›¾æ ‡ã€æ–œä½“æ–‡å­—
4. **åŠ è½½çŠ¶æ€** - æ˜¾ç¤ºåŠ è½½åŠ¨ç”»å’ŒçŠ¶æ€
5. **é™é»˜å¤±è´¥** - è·å–å¤±è´¥ä¸å½±å“ç”¨æˆ·ä½“éªŒ

### ğŸ¨ ç•Œé¢è®¾è®¡
- **æ¸å˜èƒŒæ™¯** - ä» primary åˆ° accent çš„æ¸å˜æ•ˆæœ
- **å¼•å·å›¾æ ‡** - åœ†å½¢å›¾æ ‡ï¼Œçªå‡ºå¼•ç”¨å±æ€§
- **å“åº”å¼æ–‡å­—** - ç§»åŠ¨ç«¯ base å­—å·ï¼Œæ¡Œé¢ç«¯ lg å­—å·
- **æ¨¡ç³ŠèƒŒæ™¯** - backdrop-blur-sm ç£¨ç ‚ç»ç’ƒæ•ˆæœ
- **åŠ¨ç”»æ•ˆæœ** - fade-in æ·¡å…¥åŠ¨ç”»

## æŠ€æœ¯å®ç°

### åç«¯æ¥å£

**æ–‡ä»¶**: `server/api/saying.get.ts`

**ç«¯ç‚¹**: `GET /api/saying`

**åŠŸèƒ½**: å°è£… UapiPro ä¸€è¨€ APIï¼Œé¿å…å‰ç«¯ç›´æ¥è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£

**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "text": "æ— è®ºå¤šä¹ˆå¾®å°çš„é‚‚é€…ï¼Œéƒ½å¿…å®šæœ‰ç€æŸç§æ„ä¹‰ã€‚"
  }
}
```

**ç‰¹æ€§**:
- âœ… è®¾ç½® 5 ç§’è¶…æ—¶æ—¶é—´
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… ç»Ÿä¸€çš„å“åº”æ ¼å¼
- âœ… æ—¥å¿—è®°å½•

**ä»£ç ç¤ºä¾‹**:
```typescript
export default defineEventHandler(async (event) => {
  try {
    const response = await $fetch<{ text: string }>('https://uapis.cn/api/v1/saying', {
      method: 'GET',
      timeout: 5000,
    })

    return {
      success: true,
      data: {
        text: response.text,
      },
    }
  } catch (error: any) {
    console.error('è·å–ä¸€è¨€å¤±è´¥:', error)
    throw createError({
      statusCode: 500,
      statusMessage: 'è·å–ä¸€è¨€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',
    })
  }
})
```

### å‰ç«¯å®ç°

**æ–‡ä»¶**: `app/pages/index.vue` å’Œ `app/composables/useSaying.ts`

#### Composable å°è£…

**æ–‡ä»¶**: `app/composables/useSaying.ts`

æä¾›ç»Ÿä¸€çš„ä¸€è¨€åŠŸèƒ½æ¥å£ï¼š

```typescript
export const useSaying = () => {
  // ä¸€è¨€å†…å®¹
  const saying = useState<string>('saying', () => '')
  
  // åŠ è½½çŠ¶æ€
  const loading = useState<boolean>('saying:loading', () => false)

  /**
   * è·å–ä¸€è¨€
   */
  const fetchSaying = async (): Promise<void> => {
    loading.value = true
    try {
      const response = await $fetch<{ success: boolean; data: { text: string } }>('/api/saying')
      if (response.success && response.data?.text) {
        saying.value = response.data.text
      } else {
        saying.value = ''
      }
    } catch (error) {
      console.error('è·å–ä¸€è¨€å¤±è´¥:', error)
      saying.value = ''
    } finally {
      loading.value = false
    }
  }

  /**
   * æ¸…é™¤ä¸€è¨€
   */
  const clearSaying = () => {
    saying.value = ''
  }

  return {
    // çŠ¶æ€
    saying: readonly(saying),
    loading: readonly(loading),

    // æ–¹æ³•
    fetchSaying,
    clearSaying,
  }
}
```

**ç‰¹æ€§**:
- âœ… ä½¿ç”¨ `useState` å®ç°å…¨å±€çŠ¶æ€å…±äº«
- âœ… `readonly` ä¿æŠ¤çŠ¶æ€ä¸è¢«å¤–éƒ¨ç›´æ¥ä¿®æ”¹
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… æ¸…é™¤åŠŸèƒ½ï¼ˆå¯æ‰©å±•ä½¿ç”¨ï¼‰

#### é¡µé¢ä½¿ç”¨

**æ–‡ä»¶**: `app/pages/index.vue`

**å¼•å…¥ Composable**:
```typescript
const { saying, loading: loadingSaying, fetchSaying } = useSaying()
```

**è°ƒç”¨æ–¹æ³•**:
```typescript
onMounted(() => {
  // ... å…¶ä»–åˆå§‹åŒ–
  fetchSaying()
})
```

**æ¨¡æ¿ä½¿ç”¨**:
```vue
<div v-if="saying || loadingSaying">
  <blockquote>{{ saying }}</blockquote>
  <UButton @click="fetchSaying" :loading="loadingSaying">
    åˆ·æ–°
  </UButton>
</div>
```

### UI ç»„ä»¶

**ä½ç½®**: æœç´¢æ¡†ä¸‹æ–¹ï¼Œä¸»å†…å®¹ä¸Šæ–¹

**ä½¿ç”¨ TextType ç»„ä»¶**: `app/components/TextType.vue`

TextType æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ‰“å­—æ•ˆæœç»„ä»¶ï¼ŒåŸºäº GSAP åŠ¨ç”»åº“å®ç°ã€‚

**ç»„ä»¶ç‰¹æ€§**:
- âœ… å¹³æ»‘çš„æ‰“å­—åŠ¨ç”»
- âœ… å¯è‡ªå®šä¹‰æ‰“å­—é€Ÿåº¦
- âœ… é—ªçƒå…‰æ ‡æ•ˆæœï¼ˆä½¿ç”¨ GSAPï¼‰
- âœ… æ”¯æŒå¾ªç¯æ¨¡å¼
- âœ… æ”¯æŒåˆ é™¤æ•ˆæœ
- âœ… å¯å˜é€Ÿåº¦ï¼ˆæ›´è‡ªç„¶ï¼‰
- âœ… äº¤å‰è§‚å¯Ÿå™¨æ”¯æŒï¼ˆå¯è§æ—¶æ‰å¼€å§‹ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```vue
<TextType
  :key="saying"
  :text="saying"
  :loop="false"
  :typing-speed="80"
  :show-cursor="true"
  :cursor-character="'|'"
  :cursor-blink-duration="0.5"
  class-name="text-lg md:text-xl text-gray-700 dark:text-gray-200 font-serif italic"
  cursor-class-name="text-primary-600 dark:text-primary-400"
/>
```

**Props è¯´æ˜**:
- `text`: è¦æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼‰
- `loop`: æ˜¯å¦å¾ªç¯ï¼ˆè®¾ä¸º falseï¼Œä¸€è¨€åªæ˜¾ç¤ºä¸€æ¬¡ï¼‰
- `typing-speed`: æ‰“å­—é€Ÿåº¦ï¼ˆms/å­—ï¼Œé»˜è®¤ 80ï¼‰
- `show-cursor`: æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡
- `cursor-character`: å…‰æ ‡å­—ç¬¦ï¼ˆé»˜è®¤ '|'ï¼‰
- `cursor-blink-duration`: å…‰æ ‡é—ªçƒå‘¨æœŸï¼ˆç§’ï¼‰
- `class-name`: æ–‡å­—æ ·å¼ç±»å
- `cursor-class-name`: å…‰æ ‡æ ·å¼ç±»å

**å¸ƒå±€ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœç´¢æ¡†                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  "è¯­å½•å†…å®¹..." |                     â”‚
â”‚  (æ‰“å­—æ•ˆæœ + é—ªçƒå…‰æ ‡)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸»å†…å®¹åŒº                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**HTML ç»“æ„**:
```vue
<div class="mt-6 text-center">
  <!-- åŠ è½½çŠ¶æ€ -->
  <div v-if="loadingSaying && !saying">
    <UIcon name="i-mdi-loading" class="animate-spin" />
  </div>
  
  <!-- ä¸€è¨€å†…å®¹ - TextType ç»„ä»¶ -->
  <TextType
    v-else-if="saying"
    :key="saying"
    :text="saying"
    :loop="false"
    :typing-speed="80"
    :show-cursor="true"
    class-name="..."
  />
</div>
```

**key å±æ€§**: ä½¿ç”¨ `:key="saying"` ç¡®ä¿æ¯æ¬¡è·å–æ–°çš„ä¸€è¨€æ—¶ï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“å¹¶é‡æ–°å¼€å§‹æ‰“å­—åŠ¨ç”»ã€‚

## æ ·å¼è¯´æ˜

### å®¹å™¨æ ·å¼
- **æ¸å˜èƒŒæ™¯**: `bg-gradient-to-r from-primary-50 to-accent-50`
- **æ·±è‰²æ¨¡å¼**: `dark:from-primary-900/30 dark:to-accent-900/30`
- **åœ†è§’**: `rounded-xl`
- **å†…è¾¹è·**: `p-6`
- **è¾¹æ¡†**: `border border-primary-200 dark:border-primary-700`
- **æ¨¡ç³Šæ•ˆæœ**: `backdrop-blur-sm`

### å›¾æ ‡æ ·å¼
- **å°ºå¯¸**: `w-12 h-12`
- **åœ†å½¢èƒŒæ™¯**: `rounded-full`
- **èƒŒæ™¯è‰²**: `bg-primary-100 dark:bg-primary-800`
- **å›¾æ ‡**: `i-mdi-format-quote-open`ï¼ˆå¼•å·å›¾æ ‡ï¼‰

### æ–‡å­—æ ·å¼
- **æ ‡é¢˜**: `text-sm font-medium text-primary-700`
- **å†…å®¹**: `text-base md:text-lg text-gray-700`
- **è¡Œé«˜**: `leading-relaxed`
- **æ–œä½“**: `italic`

### åŠ¨ç”»æ•ˆæœ
- **æ·¡å…¥åŠ¨ç”»**: `animate-fade-in`
- **å»¶è¿Ÿ**: `animate-delay-300`

## ç”¨æˆ·äº¤äº’

### 1. é¡µé¢åŠ è½½
- è‡ªåŠ¨è°ƒç”¨ `/api/saying` è·å–ä¸€è¨€
- æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- åŠ è½½å®Œæˆåå±•ç¤ºå†…å®¹

### 2. æ‰‹åŠ¨åˆ·æ–°
- ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- æŒ‰é’®æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆæ—‹è½¬å›¾æ ‡ï¼‰
- è·å–æ–°çš„è¯­å½•
- å†…å®¹æ›´æ–°

### 3. é”™è¯¯å¤„ç†
- ç½‘ç»œé”™è¯¯ï¼šé™é»˜å¤±è´¥ï¼Œä¸æ˜¾ç¤ºå†…å®¹
- è¶…æ—¶é”™è¯¯ï¼š5 ç§’è¶…æ—¶
- API é”™è¯¯ï¼šä¸å½±å“å…¶ä»–åŠŸèƒ½

## API æ¥æº

### UapiPro ä¸€è¨€ API

**å®˜æ–¹æ–‡æ¡£**: https://uapis.cn/docs/api-reference/get-saying

**ç«¯ç‚¹**: `https://uapis.cn/api/v1/image/bing-daily`

**ç‰¹ç‚¹**:
- å…è´¹ä½¿ç”¨
- æ— éœ€è®¤è¯
- ä¸°å¯Œçš„è¯­æ–™åº“
- åŒ…å«è¯—è¯ã€åè¨€ã€åŠ¨æ¼«å°è¯

**å“åº”ç¤ºä¾‹**:
```json
{
  "text": "æ— è®ºå¤šä¹ˆå¾®å°çš„é‚‚é€…ï¼Œéƒ½å¿…å®šæœ‰ç€æŸç§æ„ä¹‰ã€‚"
}
```

## æœ€ä½³å®è·µ

### 1. Composable å°è£…

âœ… **ä¼˜ç‚¹**:
- **ä»£ç å¤ç”¨**: å¯åœ¨å¤šä¸ªé¡µé¢/ç»„ä»¶ä¸­ä½¿ç”¨
- **çŠ¶æ€å…±äº«**: ä½¿ç”¨ `useState` å®ç°å…¨å±€çŠ¶æ€
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- **æ˜“äºæµ‹è¯•**: ç‹¬ç«‹çš„é€»è¾‘å•å…ƒ
- **å…³æ³¨ç‚¹åˆ†ç¦»**: ä¸šåŠ¡é€»è¾‘ä¸ UI åˆ†ç¦»

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
// ä»»ä½•ç»„ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨
const { saying, loading, fetchSaying } = useSaying()
```

### 2. åç«¯å°è£…
âœ… **ä¼˜ç‚¹**:
- éšè—ç¬¬ä¸‰æ–¹ API åœ°å€
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- ä¾¿äºæ·»åŠ ç¼“å­˜
- ä¾¿äºæ›´æ¢ API æº

âŒ **ä¸æ¨èç›´æ¥è°ƒç”¨**:
```typescript
// ä¸æ¨è
const response = await $fetch('https://uapis.cn/api/v1/saying')
```

âœ… **æ¨èé€šè¿‡åç«¯**:
```typescript
// æ¨è
const response = await $fetch('/api/saying')
```

### 2. é”™è¯¯å¤„ç†
```typescript
try {
  const response = await $fetch('/api/saying')
  // å¤„ç†æˆåŠŸ
} catch (error) {
  console.error('è·å–ä¸€è¨€å¤±è´¥:', error)
  // é™é»˜å¤±è´¥ï¼Œä¸å½±å“ç”¨æˆ·ä½“éªŒ
}
```

### 3. åŠ è½½çŠ¶æ€
```typescript
loadingSaying.value = true
try {
  // è¯·æ±‚
} finally {
  loadingSaying.value = false
}
```

### 4. æ¡ä»¶æ¸²æŸ“
```vue
<div v-if="saying || loadingSaying">
  <!-- åªåœ¨æœ‰å†…å®¹æˆ–åŠ è½½ä¸­æ—¶æ˜¾ç¤º -->
</div>
```

## åç»­ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜æœºåˆ¶
åœ¨åç«¯æ·»åŠ ç¼“å­˜ï¼Œå‡å°‘ API è°ƒç”¨ï¼š
```typescript
// ç¼“å­˜ 1 å°æ—¶
const cached = await useStorage().getItem('saying')
if (cached && Date.now() - cached.time < 3600000) {
  return cached.data
}
```

### 2. åˆ†ç±»ç­›é€‰
æ”¯æŒæŒ‰ç±»å‹è·å–ï¼ˆè¯—è¯ã€åè¨€ã€åŠ¨æ¼«ç­‰ï¼‰ï¼š
```typescript
GET /api/saying?type=poem
GET /api/saying?type=anime
```

### 3. æ”¶è—åŠŸèƒ½
å…è®¸ç”¨æˆ·æ”¶è—å–œæ¬¢çš„è¯­å½•ï¼š
```typescript
POST /api/saying/favorite
DELETE /api/saying/favorite/:id
```

### 4. åˆ†äº«åŠŸèƒ½
ç”Ÿæˆåˆ†äº«å¡ç‰‡ï¼Œåˆ†äº«åˆ°ç¤¾äº¤åª’ä½“

### 5. å†å²è®°å½•
æ˜¾ç¤ºæœ€è¿‘çœ‹è¿‡çš„è¯­å½•

## æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯

1. **é¦–æ¬¡åŠ è½½**
   - âœ… é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å–ä¸€è¨€
   - âœ… æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
   - âœ… åŠ è½½å®Œæˆåæ˜¾ç¤ºå†…å®¹

2. **æ‰‹åŠ¨åˆ·æ–°**
   - âœ… ç‚¹å‡»åˆ·æ–°æŒ‰é’®
   - âœ… æŒ‰é’®æ˜¾ç¤ºåŠ è½½çŠ¶æ€
   - âœ… è·å–æ–°çš„å†…å®¹

3. **é”™è¯¯å¤„ç†**
   - âœ… API å¤±è´¥ä¸å½±å“é¡µé¢
   - âœ… è¶…æ—¶åæ­£å¸¸å¤„ç†
   - âœ… ç½‘ç»œé”™è¯¯é™é»˜å¤„ç†

4. **å“åº”å¼è®¾è®¡**
   - âœ… ç§»åŠ¨ç«¯æ­£å¸¸æ˜¾ç¤º
   - âœ… æ¡Œé¢ç«¯æ­£å¸¸æ˜¾ç¤º
   - âœ… æ–‡å­—å¤§å°è‡ªé€‚åº”

5. **æ·±è‰²æ¨¡å¼**
   - âœ… é¢œè‰²æ­£ç¡®é€‚é…
   - âœ… å¯¹æ¯”åº¦è‰¯å¥½
   - âœ… å¯è¯»æ€§é«˜

## æ›´æ–°æ—¥å¿—

### 2026-01-20
- âœ… æ–°å¢æ¯æ—¥ä¸€è¨€åŠŸèƒ½
- âœ… åˆ›å»ºåç«¯å°è£…æ¥å£
- âœ… å®ç°å‰ç«¯å±•ç¤ºç»„ä»¶
- âœ… æ·»åŠ åˆ·æ–°åŠŸèƒ½
- âœ… å®Œå–„åŠ è½½å’Œé”™è¯¯å¤„ç†
- âœ… ä¼˜åŒ–æ ·å¼å’ŒåŠ¨ç”»

## ç›¸å…³æ–‡æ¡£

- [UapiPro ä¸€è¨€ API æ–‡æ¡£](https://uapis.cn/docs/api-reference/get-saying)
- [é¦–é¡µåŠŸèƒ½è¯´æ˜](./HOME_PAGE_FEATURES.md)
- [API æ¥å£æ–‡æ¡£](./API_REFERENCE.md)

